<!DOCTYPE HTML>
<html>

<head>
    <style>
        .Square {
            float: left;
            width: 64px;
            height: 64px;
            margin: 10px;
            padding: 10px;
            border: 1px solid black
        }
    </style>
    <link rel="stylesheet" href="scripts/style.css">

    <script>
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            var selectedDiv = ev.currentTarget.parentNode;
            console.log(selectedDiv.id + " square selected")
            enableTravelableSquareOf(selectedDiv.id)
        }

        function enableTravelableSquareOf(squareId) {
            activateDroppablesquare(squareId)
            activateDroppablesquare(+squareId + +1)
            activateDroppablesquare(+squareId + +10)
            activateDroppablesquare(squareId - 1)
            activateDroppablesquare(squareId - 10)
            var omniDirectionPostitons = ["11", "13", "15", "22", "24", "31", "33", "35", "42", "44", "51", "53", "55"]
            if (omniDirectionPostitons.includes(squareId)) {
                activateDroppablesquare(+squareId + +11)
                activateDroppablesquare(squareId - 11)
                activateDroppablesquare(+squareId + +9)
                activateDroppablesquare(squareId - 9)
            }
        }

        function activateDroppablesquare(squareId) {
            var square = document.getElementById(squareId)
            if (square) {
                square.setAttribute("ondrop", "drop(event)")
                square.setAttribute("ondragover", "allowDrop(event)")
            }
        }

        function deactivateAllDroppable() {
            var allSquares = document.getElementsByClassName("Square")
            for (var i = 0; i < allSquares.length; i++) {
                allSquares[i].removeAttribute("ondrop")
                allSquares[i].removeAttribute("ondragover")
            }
        }

        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            ev.target.appendChild(document.getElementById(data));
            deactivateAllDroppable()
        }
    </script>
</head>

<body>

    <table border="1">
        <tr>
            <td>
                <div class="Square" id='11'>
                    <img id="tiger1" src="images/tiger.png" draggable="true" ondragstart="drag(event)">
                </div>
            </td>
            <td>
                <div class="Square" id='12'></div>
            </td>
            <td>
                <div class="Square" id='13'></div>
            </td>
            <td>
                <div class="Square" id='14'></div>
            </td>
            <td>
                <div class="Square" id='15'>
                    <img id="tiger2" src="images/tiger.png" draggable="true" ondragstart="drag(event)">
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="Square" id='21'> </div>
            </td>
            <td>
                <div class="Square" id='22'></div>
            </td>
            <td>
                <div class="Square" id='23'></div>
            </td>
            <td>
                <div class="Square" id='24'></div>
            </td>
            <td>
                <div class="Square" id='25'> </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="Square" id='31'> </div>
            </td>
            <td>
                <div class="Square" id='32'></div>
            </td>

            <td>
                <div class="Square" id='33'></div>
            </td>
            <td>
                <div class="Square" id='34'></div>
            </td>
            <td>
                <div class="Square" id='35'> </div>
            </td>

        </tr>
        <tr>
            <td>
                <div class="Square" id='41'> </div>
            </td>
            <td>
                <div class="Square" id='42'></div>
            </td>
            <td>
                <div class="Square" id='43'></div>
            </td>
            <td>
                <div class="Square" id='44'></div>
            </td>
            <td>
                <div class="Square" id='45'> </div>
            </td>

        </tr>
        <tr>
            <td>
                <div class="Square" id='51'>
                    <img id="tiger3" src="images/tiger.png" draggable="true" ondragstart="drag(event)">
                </div>
            </td>
            <td>
                <div class="Square" id='52'></div>
            </td>
            <td>
                <div class="Square" id='53'></div>
            </td>
            <td>
                <div class="Square" id='54'></div>
            </td>
            <td>
                <div class="Square" id='55'>
                    <img id="tiger4" src="images/tiger.png" draggable="true" ondragstart="drag(event)">
                </div>
            </td>
            </td>
        </tr>
    </table>

</body>

</html>